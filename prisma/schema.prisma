generator client {
  provider   = "prisma-client-js"
  engineType = "binary"
}

datasource db {
  provider = "postgresql"
}

enum TipoPerfil {
  CANDIDATO
  RECRUTADOR
}

model Perfil {
  id           Int         @id @default(autoincrement())
  nome         String
  email        String
  tipo         TipoPerfil
  senha        String
  biografia    String?
  foto         String?
  createdAt    DateTime    @default(now())
  updatedAt    DateTime    @updatedAt
  ultimoAcesso DateTime
  recrutador   Recrutador?
  candidato    Candidato?
}

enum CargoRecrutador {
  TECNICO
  PROFESSOR
  PESQUISADOR
}

model Recrutador {
  id           Int             @id @default(autoincrement())
  perfilId     Int             @unique
  cargo        CargoRecrutador
  instituicao  String
  areaAtuacao  String
  laboratorios String?
  perfil       Perfil          @relation(fields: [perfilId], references: [id], onDelete: Cascade)
  vagas        Vaga[]
}

enum CargoCandidato {
  ALUNO
  TECNICO
}

enum NivelEscolaridade {
  FUNDAMENTAL_INCOMPLETO
  FUNDAMENTAL_COMPLETO
  MEDIO_INCOMPLETO
  MEDIO_COMPLETO
  SUPERIOR_INCOMPLETO
  SUPERIOR_COMPLETO
  POS_GRADUACAO
}

model Candidato {
  id                Int               @id @default(autoincrement())
  perfilId          Int               @unique
  cargo             CargoCandidato
  instituicao       String
  areaAtuacao       String
  nivelEscolaridade NivelEscolaridade
  periodoIngresso   String?
  periodoConclusao  String?
  disponivel        Boolean
  tempoDisponivel   Int
  lattes            String?
  linkedin          String?
  areasInteresse    String[]
  habilidades       String[]
  perfil            Perfil            @relation(fields: [perfilId], references: [id], onDelete: Cascade)
  experiencias      Experiencia[]
}

enum PublicoAlvo {
  ALUNO_GRADUACAO
  ALUNO_POS_GRADUACAO
  TECNICO
  PESQUISADOR
}

enum Categoria {
  PROJETO_PESQUISA
  PROJETO_PESQUISA_DESENVOLVIMENTO
  PROJETO_PESQUISA_DESENVOLVIMENTO_INOVACAO
  PROJETO_EXTENSAO
  MONITORIA
  ORGANIZACAO_EVENTO
  OUTROS
}

model Vaga {
  id                        Int           @id @default(autoincrement())
  recrutadorId              Int
  recrutador                Recrutador    @relation(fields: [recrutadorId], references: [id], onDelete: Cascade)
  titulo                    String
  descricao                 String
  categoria                 Categoria
  ehPublica                 Boolean
  ehRemunerada              Boolean
  dataExpiracao             String?
  cargaHoraria              Int
  duracao                   String?
  instituicao               String
  curso                     String
  linkInscricao             String
  local                     String
  publicoAlvo               PublicoAlvo[]
  conhecimentosObrigatorios String[]
  conhecimentosOpcionais    String[]
}

model Experiencia {
  id            Int       @id @default(autoincrement())
  candidatoId   Int
  candidato     Candidato @relation(fields: [candidatoId], references: [id], onDelete: Cascade)
  titulo        String
  descricao     String
  orientador    String
  instituicao   String
  periodoInicio String
  periodoFim    String?
  local         String?
}
