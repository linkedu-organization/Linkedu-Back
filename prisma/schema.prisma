generator client {
  provider   = "prisma-client-js"
  engineType = "binary"
}

datasource db {
  provider = "postgresql"
}

model Perfil {
  id           Int         @id @default(autoincrement())
  nome         String
  email        String
  tipo         TipoPerfil
  senha        String
  biografia    String?
  foto         String?
  createdAt    DateTime    @default(now())
  updatedAt    DateTime    @updatedAt
  ultimoAcesso DateTime
  candidato    Candidato?
  recrutador   Recrutador?
}

model Recrutador {
  id           Int             @id @default(autoincrement())
  perfil_id    Int             @unique
  cargo        CargoRecrutador
  instituicao  String
  areaAtuacao  String
  laboratorios String?
  perfil       Perfil          @relation(fields: [perfil_id], references: [id], onDelete: Cascade)
  vagas        Vaga[]
}

model Candidato {
  id                Int               @id @default(autoincrement())
  perfil_id         Int               @unique
  cargo             CargoCandidato
  instituicao       String
  areaAtuacao       String
  nivelEscolaridade NivelEscolaridade
  periodoIngresso   String?
  periodoConclusao  String?
  disponivel        Boolean
  lattes            String?
  linkedin          String?
  areasInteresse    String[]
  habilidades       String[]
  tempoDisponivel   Int
  perfil            Perfil            @relation(fields: [perfil_id], references: [id], onDelete: Cascade)
  vagasRecomendadas Recomendacao[]
}

model Vaga {
  id                        Int            @id @default(autoincrement())
  recrutadorId              Int
  titulo                    String
  descricao                 String
  categoria                 Categoria
  ehPublica                 Boolean
  ehRemunerada              Boolean
  dataExpiracao             String?
  cargaHoraria              Int
  duracao                   String?
  instituicao               String
  curso                     String
  linkInscricao             String
  local                     String
  publicoAlvo               PublicoAlvo[]
  conhecimentosObrigatorios String[]
  conhecimentosOpcionais    String[]
  candidatosRecomendados    Recomendacao[]
  recrutador                Recrutador     @relation(fields: [recrutadorId], references: [id], onDelete: Cascade)
}

model Recomendacao {
  vagaId      Int
  candidatoId Int
  updatedAt   DateTime         @default(now())
  descricao   String
  tipo        TipoRecomendacao
  candidato   Candidato        @relation(fields: [candidatoId], references: [id], onDelete: Cascade)
  vaga        Vaga             @relation(fields: [vagaId], references: [id], onDelete: Cascade)

  @@id([vagaId, candidatoId])
}

enum TipoPerfil {
  CANDIDATO
  RECRUTADOR
}

enum CargoRecrutador {
  TECNICO
  PROFESSOR
  PESQUISADOR
}

enum CargoCandidato {
  ALUNO
  TECNICO
}

enum NivelEscolaridade {
  FUNDAMENTAL_INCOMPLETO
  FUNDAMENTAL_COMPLETO
  MEDIO_INCOMPLETO
  MEDIO_COMPLETO
  SUPERIOR_INCOMPLETO
  SUPERIOR_COMPLETO
  POS_GRADUACAO
}

enum PublicoAlvo {
  ALUNO_GRADUACAO
  ALUNO_POS_GRADUACAO
  TECNICO
  PESQUISADOR
}

enum Categoria {
  PROJETO_PESQUISA
  PROJETO_PESQUISA_DESENVOLVIMENTO
  PROJETO_PESQUISA_DESENVOLVIMENTO_INOVACAO
  PROJETO_EXTENSAO
  MONITORIA
  ORGANIZACAO_EVENTO
  OUTROS
}

enum TipoRecomendacao {
  VAGAS_PARA_CANDIDATO
  CANDIDATOS_PARA_VAGA
}

model Document {
  id        Int                    @id @default(autoincrement())
  title     String
  embedding Unsupported("vector")?
}
